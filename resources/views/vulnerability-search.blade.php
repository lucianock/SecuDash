<x-layouts.app>
    <div class="max-w-xl mx-auto p-6">
        <h2 class="text-2xl font-semibold mb-4">Vulneravility search ðŸš§ (Under Development)</h2>
        <div id="vulnerability-search">

            <h3>Consultar Vulnerabilidades</h3>
            <input type="text" id="search-query" placeholder="Introduce software o versiÃ³n" class="border p-2">
            <button id="search-vulnerabilities" class="bg-green-500 text-white p-2 rounded">Buscar</button>

            <div id="vulnerability-results" class="mt-4 hidden">
                <h4>Resultados de la bÃºsqueda</h4>
                <ul id="vuln-list"></ul>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('search-vulnerabilities').addEventListener('click', async function() {
            const query = document.getElementById('search-query').value;
            const response = await fetch(`/api/vulnerabilities?query=${encodeURIComponent(query)}`);
            const data = await response.json();
            if (data && data.results && data.results.length) {
                const vulnList = document.getElementById('vuln-list');
                vulnList.innerHTML = '';
                data.results.forEach(vuln => {
                    const li = document.createElement('li');
                    li.textContent = vuln;
                    vulnList.appendChild(li);
                });
                document.getElementById('vulnerability-results').classList.remove('hidden');
            } else {
                alert('No se encontraron vulnerabilidades');
            }
        });
    </script>


</x-layouts.app>
